<script type="module" defer>
  const btn = document.getElementById('back-to-top');
  window.addEventListener('scroll', () => {
    btn.classList.toggle('show', window.scrollY > 300);
  });
  btn.addEventListener('click', () =>
    window.scrollTo({ top: 0, behavior: 'smooth' })
  );

  document.addEventListener('DOMContentLoaded', () => {
    const selectWrapper = document.querySelector('.select-wrapper');
    const categoryFilter = document.getElementById('category-filter');
    const cards = document.querySelectorAll('.card-item');
    const noResults = document.getElementById('no-results');

    if (!categoryFilter || !selectWrapper) {
      console.error('Dropdown or wrapper not found!');
      return;
    }

    categoryFilter.addEventListener('click', () => {
      selectWrapper.classList.toggle('open'); 
    });

    categoryFilter.addEventListener('blur', () => {
      selectWrapper.classList.remove('open'); 
    });

    categoryFilter.addEventListener('change', (event) => {
      const selectedCategory = event.target.value.toLowerCase(); 
      console.log('Selected category:', selectedCategory);
      let hasVisibleCards = false;

      cards.forEach((card) => {
        const category = card.getAttribute('data-category'); 
        console.log('Card category:', category);

        if (selectedCategory === 'all' || category === selectedCategory) {
          card.style.display = 'block';
          hasVisibleCards = true;
        } else {
          card.style.display = 'none';
        }
      });

      noResults.style.display = hasVisibleCards ? 'none' : 'block';
    });
  });
</script>